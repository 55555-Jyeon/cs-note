# 네트워크

## 1. 네트워크의 기초

- 네트워크란 노드(node)와 링크(link)가 서로 연결되어 있으며 리소스를 공유하는 집합을 의미한다.
- 노드 - 서버, 라우터, 스위치 등 네트워크 장치를 의미한다.
- 링크 - 유선 또는 무선을 의미한다.

### 처리량과 지연 시간

- 처리량
  - 링크 내에서 성공적으로 전달된 데이터의 양을 말하며 보통 얼만큼의 트래픽을 처리했는지 나타낸다.
  - 많은 트래픽을 처리한다 = 많은 처리량을 가진다.
  - 단위 bps(bits per second) - 초당 전송 또는 수신되는 비트 수
- 지연 시간
  - 요청이 처리되는 시간을 말하며 어떤 메시지가 두 장치 사이를 왕복하는데 걸리는 시간

### 네트워크 토폴로지와 병목 현상

- 네트워크 토폴로지
  - 네트워크를 설계할 때 고려하는 네트워크 토폴로지
  - 노드와 링크가 어떻게 배치되어 있는지에 대한 방식이자 연결형태를 의미한다.
- 트리 토폴로지
  - 계층형 토폴로지라고 하며 트리 형태로 배치한 네트워크 구성을 말한다.
  - 노드의 추가, 삭제가 쉬우며 특정 노드에 트래픽이 집중될 때 하위 노드에 영향을 끼칠 수 있다.
- 버스 토폴로지
  - 중앙 통신 회선 하나에 어러 개의 노드가 연결되어 공유하는 네트워크 구성. 근거리 통신망(LAN)에 사용한다.
- 스푸핑
  - LAN상에서 송신부의 패킹을 송신과 관련 없는 다른 호스트에 가지 않도록 하는 스위칭 기능을 마비시키거나 속여서 특정 노드에 해당 패킷이 오도록 처리하는 것
- 스타 토폴로지
  - 중앙에 있는 노드에 모두 연결된 네트워크 구성
  - 노드의 추가와 에러 탐지가 쉽고 패킷의 충돌 발생 가능성이 적다.
- 링형 토폴로지
  - 각각의 노드가 양 옆의 두 노드와 연결하여 전체적으로 고리처럼 하나의 연속된 길을 통해 통신을 하는 망 구성 방식
- 메시 토폴로지

  - 망형 토폴로지라고도 하며 그물망처럼 연결되어 있는 구조다.

- 병목 현상
  - 네트워크 구조라고도 일컫는 토폴로지가 중요한 이유는 병목 현상을 찾을 때 중요한 기준이 되기 때문이다.
  - 전체의 시스템의 성능이나 용량이 하나의 구성 요소로 인해 제한을 받는 현상

### 네트워크 분류

- LAN
  - 근거리 통신망을 의미하며 같은 건물이나 캠퍼스 같은 좁은 공간에서 운영된다.
- MAN
  - 대도시 지역 네트워크를 나타내며 도시 같은 넓은 지역에서 운영된다.
- WAN
  - 광역 네트워크를 의미하며 국가 또는 대륙 같은 더 넓은 지역에서 운영된다.

### 네트워크 성능 분석 명령어

- 어플리케이션 코드상에는 전혀 문제가 없는데 사용자가 서비스로부터 데이터를 가져오지 못하는 상황이 발생되기도 하며, 이는 네트워크 병목 현상일 가능성이 있다.
- 네트워크 병목 현상의 원인

  - 네트워크 대역폭
  - 너트워크 토폴로지
  - 서버 CPU, 메모리 사용량
  - 비효율적인 네트워크 구성

- ping(Packet Internet Groper)
  - 네트워크 상태를 확인하려는 대상 노드를 향해 일정 크기의 패킷을 전송하는 명령어
  - 이를 통해 해당 노드의 패킷 수신 상태와 도달하기까지 시간 등을 알 수 있으며 해당 노드까지 네트워크가 잘 연결되어 있는지 확인할 수 있습니다.
- netstat
  - 접속되어 있는 서비스들의 네트워크 상태를 표시하는데 사용되며 네트워크 접속, 라우팅 테이블, 네트워크 프로토콜 등 리스트를 보여줍니다. 주로 서비스의 포트가 열려있는지 확인할 때 사용한다.
- nslookup
  - DNS에 관련된 내용을 확인하기 위해 쓰는 명령어
  - 특정 도메인의 매핑된 IP를 확인하기 위해 사용된다.
- tracert
  - 목적지 노드까지 네트워크 경로를 확인할 때 사용하는 명령어

### 네트워크 프로토콜 표준화

- 다른 장치들끼리 데이터를 주고받기 위해 설정된 공통된 인터페이스
- 개인이 정하는 것이 아닌 IEEE 또는 IETF라는 표준화 단체에서 정한다.

## 2. TCP/IP 4계층 모델

- 인터넷 프로토콜 스위트 - 인터넷에서 컴퓨터들이 서로 정보를 주고받는데 쓰이는 프로토콜의 집합이며, 이를 TCP/IP 4계층 모델, OSI 7계층 모델로 설명한다.

- TCP/IP 4계층 모델
  - 애플리케이션 계층
    - FTP/HTTP/SSH/SMTP/DNS 등 응용프로그램이 사요되는 프로토콜 계층
    - 웹서비스, 이메일 등 서비스를 실질적으로 사람들에게 제공하는 층
  - 전송 계층
    - 송신자와 수신자를 연결하는 통신 서비스를 제공하며 연결 지향 데이터 스트림 지원, 신뢰성, 흐름 제어를 제공할 수 있으며 애플리케이션과 인터넷 계층 사이의 데이터가 전달될 때 중계 역할을 한다.
    - 가상회선 패킷 교환 방식 - 각 패킷에는 가상회선 식별자가 포함되며 모든 패킷을 전송하면 가상회선이 해제되고 패킷들은 전송된 '순서대로' 도착하는 방식
    - 데이터그램 패킷 교환 방식 - 패킷이 독립적으로 이동하며 최적의 경로를 선택하여 가는데, 하나의 메세지에서 분할된 여러 패킷은 서로 다른 경로로 전송될 수 있으며 도착한 '순서가 다를 수' 있는 방식
  - 인터넷 계층
    - 장치로부터 받은 네트워크 패킷을 IP주소로 지정된 목적지로 전송하기 위해 사용되는 계층
    - IP,ARP,ICMP 등이 있으며 패킷을 수신해야 할 상대의 주소를 지정하여 데이터를 전달한다.
  - 링크 계층
    - 전선, 광섬유, 무선 등으로 실질적으로 데이터를 전달하며 장치 간에 신호를 주고받는 '규칙'을 정하는 계층
    - 유선 LAN
      - IEEE802.3이라는 프로토콜을 따르며 전이 중화 통신을 사용한다.
      - 전이중화 통신 - 양쪽 장치가 동시에 송수신할 수 있는 방식
    - CSMA/CD
      - 유선 LAN 이전에 반이중화 통신 중 하나인 CSMA/CD 방식을 사용했다.
      - 데이터를 보낸 이후 충돌이 발생한다면 일정 시간 이후 재전송하는 방식이다.
    - 유선 LAN을 이루는 케이블
      - 트위스트 페어 케이블
        - 하나의 케이블처럼 보이지만 실제로는 8개의 구선을 두 개씩 꼬아서 묶은 케이블을 지칭한다.
      - 광섬유 케이블
        - 광섬유로 만든 케이블
        - 레이저를 이용해서 통신하기 때문에 구리선과 비교할 수 없을 만큼의 장거리 및 고속 통신이 가능하다.
      - 무선 LAN - 수신과 송신을 같은 채널을 사용하기 때문에 반이중화 통신을 사용한다.
      - 반이중화 통신
        - 양쪽 장치는 서로 통신할 수 있지만, 동시에는 통신할 수 없으며 한번에 한 방향만 통신할 수 있는 방식
      - 와이파이 - 전자기기들이 무선 LAN 신호에 연결할 수 있게 하는 기술로, 이를 사용하려면 무선 접속 장치가 있어야 한다.
      - BSS - 기본 서비스 집합을 의미하며, 단순 공유기를 통해 네트워크에 접속하는 것이 아닌 동일 BSS 내에 있는 AP가 있어야 한다.
      - ESS - 하나 이상의 연결된 BSS 그룹이다. 장거리 무선 통신을 제공하며 BSS보다 더 많은 가용성과 이동성을 지원한다.
      - 이더넷 프레임
        - Preamble - 이더넷 프레임이 시작임을 알린다.
        - SFD - 다음 바이트부터 MAC 주소 필드가 시작됨을 알린다.
        - DMAC, SMAC - 수신, 송신 MAC 주소를 말한다.
        - EtherType - 데이터 계층 위의 계층인 IP 프로토콜을 정의한다.
        - Payload - 전달받은 데이터
        - CRC - 에러 확인 비트
- OSI 7계층 모델
  - 애플리케이션 계층
  - 프레젠테이션 계층
  - 세션 계층
  - 전송 계층
  - 네트워크 계층
  - 데이터 링크 계층
  - 물리 계층

### PDU

- 네트워크의 어떠한 계층에서 계층으로 데이터가 전달될 때 한 덩어리의 단위
- 헤더와 페이로드로 구성되어 있고 계층마다 부르는 명칭이 다르다.
  - 애플리케이션 계층 - 메세지
  - 전송 계층 - 세그먼트, 데이터그램
  - 인터넷 계층 - 패킷
  - 링크 계층 - 프레임, 비트

## 네트워크 기기

### 네트워크 기기의 처리 범위

- 애플리케이션 계층 - L7 스위치
- 인터넷 계층 - 라우터, L3 스위치
- 데이터 링크 계층 - L2 스위치, 브리지
- 물리 계층 - NIC, 리피터, AP

### 애플리케이션 계층을 처리하는 기기

- L7 스위치 - 여러 장비를 연결하고 데이터 통신을 중재하며 목적지가 연결된 포트로만 전기 신호를 보내 데이터를 전송하는 통신 네트워크 장비 = 로드밸런서 , 서버의 부하를 분산하는 기기다.
- L4 vs L7 스위치
  - L4 스위치는 전송 계층을 처리하는 기기로 스트리밍 관련 서비스에는 사용 불가, 메세지 기반으로 인식 X, IP와 포트를 기반으로 트래픽을 분산한다.
- 헬스 체크
  - 두 스위치 모두 헬스 체크를 통해 정상적인 서버인지 판별하는데, 전송 주기와 재전송 횟수 등을 설정한 이후 반복적으로 서버에 요청을 보내는 것

### 인터넷 계층을 처리하는 기기

- 라우터 - 여러개의 네트워크를 연결, 분할, 구분시켜주는 역할
- L3 스위치 - L2 스위치의 기능과 라우팅 기능을 갖춘 장비

### 데이터 링크 계층을 처리하는 기기

- L2 스위치 - MAC 주소를 MAC 주소 테이블을 통해 관리하며, 연결된 장치로부터 패킷이 왔을 때 패킷 전송을 담당한다.
- 브리지 - 두개의 근거리 통신망을 상호 접속할 수 있도록 하는 통신망 연결 장치

### 물리 계층을 처리하는 기기

- NIC - LAN 카드라고 하는 네트워크 인터페이스 카드, 2대 이상의 컴퓨터 네트워크를 구성하는데 사용
- 리피터 - 들어오는 약해진 신호 정도를 증폭하여 다른 쪽으로 전달하는 장치
- AP - 패킷을 복사하는 기기

## IP주소

### ARP

- IP 주소로부터 MAC 주소를 구하는 IP와 MAC 주소의 다리 역할을 하는 프로토콜
- 논리적 주소 -> ARP -> 물리적 주소
- 물리적 주소 -> RARP -> 논리적 주소

### 홉바이홉 통신

- IP 주소를 통해 통신하는 과정
- 통신망에서 각 패킷이 여러개의 라우터를 건너가는 모습을 비유적으로 표현

- 라우팅 테이블 - 송신지에서 수신지까지 도달하기 위해 사용되며 라우터에 들어가 있는 목적지 정보들과 그 목적지로 가기 위한 방법이 들어 있는 리스트
- 게이트 웨이 - 서로 다른 통신망, 프로토콜을 사용하는 네트워크 간의 통신을 가능하게 하는 관문 역할을 하는 컴퓨터나 소프트웨어를 두루 일컫는 용어

### IP 주소 체계

- IPv4와 IPv6로 나뉜다.
