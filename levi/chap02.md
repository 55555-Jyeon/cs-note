## 📖 Overview

네트워크는 컴퓨터 등의 장치들이 통신 기술을 이용하여 구축하는 연결망을 지칭하는 용어이다. 네트워크의 기초부터 시작해서 네트워크를 이루는 계층, 장치에 대해 알아보자

## 📖 네트워크란?

하드웨어적인 **전송 매체**를 매개로 서로 연결되어 **데이터를 교환하는 시스템의 모음**이다.

_**그렇다면 네트워크를 분류할때 어떤 방식으로 분류할 수 있을까?**_

일반적으로 네트워크는 물리적으로 일정 거리 이상 떨어진 위치에서 독립적으로 실행할 수 있는 호스트 간의 데이터 송수신 기능을 지원한다. 호스트 사이의 연결 거리를 기준으로 네트워크를 **LAN**, **MAN**, **WAN**으로 구분할 수 있다.

데이터 전송 및 라우팅 기술에 따라 네트워크를 분류하는 방식에도 두 가지가 있다. 각 호스트를 일대일로 직접 연결하는 방식인 **점대점(Point-to-Point)** 방식 그리고 네트워크에 연결된 모든 호스트에 데이터를 전송하는 **브로드캐스팅(Broadcasting)** 방식이 있다.

❌: 점대점(Point-to-Point) 방식
⭕: 브로드캐스팅(Broadcasting) 방식

### 🔎 LAN

> **LAN(Local Area Network)**은 단일 건물이나 학교 같은 가까운 거리에 위치하는 호스트로 구성된 네트워크이다.

LAN은 MAN이나 WAN 환경보다 호스트 간의 간격이 가깝기 때문에 데이터를 **브로드캐스팅(Broadcasting)** 방식으로 전송한다.

**LAN 환경**에서 호스트를 연결하는 방식을 네트워크 토폴로지에 따라서 **버스형**, **링형**으로 구분할 수 있다.

> **⭕ 버스형**
>
> 버스(Bus)형 토폴로지는 아래 그림처럼 공유 버스 하나에 여러 호스트를 직접 연결한다.
> 버스형 구조에서는 모든 호스트가 **하나의 전송 매체를 공유**하므로 호스트가 전송한 데이터를 네트워크에 연결된 모든 호스트에 전송하는 **브로드캐스팅 방식**으로 동작
> ![](https://velog.velcdn.com/images/psik_2/post/3a632310-8bc3-4b0c-8d30-b20166489593/image.png)
>
> 버스형 구조에서 둘 이상의 호스트가 데이터를 전송하려고 하면 공유 버스에서 **데이터 충돌**이 발생할 수 있다.
> 충돌 문제를 해결하는 방법에는 충돌이 발생할 가능성 자체를 차단하는 **사전 방지 방식**과 충돌을 허용하고 나중에 해결하는 **사후 해결 방식**이 있다.
>
> 대표적인 버스형 토폴로지의 형태인 **이더넷**은 충돌 후에 문제를 해결하는 **사후 해결 방식**에 해당
>
> **⭕ 링형**
>
> 링(Ring)형 토폴리지는 아래 그림처럼 전송 호스트의 연결이 순환 구조인 링 형태이다.
> 데이터는 시계나 반시계 방향으로 전송될 수 있지만, 정해진 **한쪽 방향으로만 전송**된다. 또한 특정 호스트에서 전송한 데이터는 반드시 링을 한 바퀴 돌아 송신 호스트로 되돌아오게 설계되었다.
> 링형 토폴리지는 네트워크에 연결된 모든 호스트가 전송 데이터를 수신하는 **브로드캐스팅(Broadcasting)** 방식을 지원한다.
>
> ![](https://velog.velcdn.com/images/psik_2/post/7d2a9751-4299-4e9e-b3ea-bfe5cf815f2b/image.png)
>
> 링형도 버스형과 마찬가지로 둘 이상의 호스트에서 데이터를 동시에 전송하면 충돌이 발생할 수 있다.
> 일반적으로 링형에서는 **토큰(Token)**이라는 제어 프레임을 사용해 충돌 가능성을 원천적으로 차단한다. 즉 링형 토폴리지는 **사전 방지 방식**을 사용

### 🔎 MAN

> **MAN(Metropolitan Area Network)**은 LAN보다 큰 지역을 지원한다.
> 사용하는 하드웨어와 소프트웨어는 LAN과 비슷하지만, 연결 규모가 더 크다.

MAN을 위한 국제 표준안은 **DQDB(Distributed Queue Dual Bus)**이다. 이 규격은 전송 방향이 다른 두 버스로 모든 호스트를 연결하는 구조를 지원한다.
![](https://velog.velcdn.com/images/psik_2/post/687e9920-527d-429c-bef1-340895ec057b/image.png)

DQDB는 위 사진처럼 **2개의 단방향 선로**가 존재하며, 이 전송 선로를 통해 모든 호스트가 연결된다. Bus B는 데이터를 왼쪽에서 오른쪽으로 전송하며, Bus A 는 데이터를 오른쪽에서 왼쪽으로 전달한다.

Bus A에서 헤드 역할을 하는 호스트 1이 일정 주기로 **슬롯(Slot)**을 내보내고, 이 슬롯은 호스트 5에서 처리를 완료할 때까지 왼쪽으로 계속 이동한다. 이 과정에서 중간 호스트는 슬롯을 프레임으로 변형해 데이터를 전송할 수 있다. Bus B도 같은 원리를 이용해 데이터를 반대 방향으로 전송할 수 있다.

또한 위 그림에는 없지만 호스트 1에서 호스트 5까지의 물리적인 거리가 짧다면 호스트 1과 호스트 5를 직접적으로 연결하는 **추가 전송 매체**를 사용하여 새로운 연결을 구성할 수 있다.

### 🔎 WAN

> **WAN(Wide Area Network)**은 국가 이상의 넓은 지역을 지원하는 네트워크 구조이다.

LAN과 MAN의 구성에서는 전송 호스트가 공유 버스를 이용한 브로드캐스팅을 지원하기 때문에 **라우팅**의 개념이 필요없다. 그러나 거리가 먼 WAN에서는 브로스캐스팅 방식을 지원하기 어렵고, 전송 매체가 길어지는 환경을 고려해야 한다.

> **라우팅**
>
> 라우팅은 네트워크 안에서 데이터를 보낼때 **최적의 경로를 선택하는 과정**을 의미한다.

따라서 WAN에서는 전송 매체를 이용해 호스트를 일대일로 연결하는 **점대점(Point-to-Point)** 방식을 사용한다.

> ❌ **스타형**
>
> 스타(star)형은 중앙에 있는 하나의 중개 호스트 주위로 여러 호스트를 일대일로 연결하는 형태이다.
>
> ![](https://velog.velcdn.com/images/psik_2/post/c21121a2-2793-44a3-ab8e-99b167a2c4a3/image.png)
>
> 스타형은 위 그림에서 알 수 있듯이 주변 호스트가 데이터를 송수신하려면 반드시 **중앙의 중개 호스트**를 거쳐야 한다. 따라서 중앙 호스트의 신뢰성과 성능이 전체 네트워크의 성능과 신뢰성에 많은 영향을 준다.
>
> ❌ **트리형**
>
> 스타형은 다단계로 확장될 수 있는데, 중앙에 있는 스타 구조 주변에 위치한 호스트들을 중심으로 새로운 스타 구조가 확장되는 형태이다. 이를 트리(Tree)형 구조라고 한다.
>
> ![](https://velog.velcdn.com/images/psik_2/post/1498cb54-0246-4086-ac35-cf49f161f7be/image.png)
>
> 트리형은 모든 데이터가 중앙 호스트를 중심으로 라우팅되므로 중개 과정이 간단하지만, 중앙 호스트에 문제가 생기면 전체 네트워크의 동작에 영향을 많이 준다는 단점이 있다.
>
> ❌ **완전형**
>
> 완전(Mesh)형은 네트워크에 존재하는 모든 호스트가 다른 모든 호스트와 일대일로 직접 연결하는 방식이다. 호스트끼리 서로 공유하지 않는 전용 전송 매체로 직접 연결하기 때문에 라우팅 기능이 필요 없다.
>
> ![](https://velog.velcdn.com/images/psik_2/post/b8660cd5-0e42-408b-b70f-647f44f8c67c/image.jpg)
>
> 완전형 구조의 단점은 사용하는 전송 매체의 개수가 증가하면 비용 측면에서 극단적으로 비효율적인 것이다.
> 예를 들어 네트워크에 존재하는 전체 호스트의 개수가 **N개**라고 가정하면, 연결에 필요한 전송 매체의 수는 _**N×(N-1)/2**_ 개가 된다. 따라서 특정한 목적 을 위해 연결하는 경우가 아니라면 완전형을 사용하는 경우는 거의 없다.

WAN에서는 호스트 사이의 거리가 멀기 때문에 연결의 수가 증가할수록 전송 매체를 많이 사용하므로 비용이 많이 든다. 따라서 총 연결 거리를 줄이면서 전체 호스트를 효율적으로 연결하도록 설계해야 한다.

## 📖 네트워크 계층 모델

### 🔎 OSI 7 계층

통신과 네트워크에 대해 깊게 공부하지 않았어도 아래 있는 말들은 많이 들어봤을 것이다.

_**OSI 7 계층❓ 물데네전세표응❓**_

아래 사진에 있는 모델이 우리가 평상시에 _**"물데네전세표응"**_ 으로 알고 있었던(~~혹은 시험기간에 열심히 외우고 있었던...~~) OSI 7 계층 모델이다.

![](https://velog.velcdn.com/images/psik_2/post/a73f8cb5-740b-45b3-b3a7-0088360d82a6/image.gif)

_**그러면 OSI 7 계층은 무엇일까?**_

> **OSI 7 계층 모델**은 국제 표준화 기구인 ISO가 확립한 모델로 개방화된 Open 데이터 통신 환경에 적합한 계층적 구현 모델의 표준이다.

위 그림을 보면 서로 연결되어 있는 두 호스트가 각각 7개의 계층으로 구성된 모듈을 수행함으로써 데이터 송수신을 하고 있는 것을 확인할 수 있다.

그림을 보면 전송 데이터는 송신 호스트의 **응용 계층(Application Layer)**에서 시작해 하위 계층으로 순차적으로 전달되어, 최종적으로 **물리 계층(Physical Layer)**에서 수신 호스트에 전달되는 것을 알 수 있다. 수신 호스트에서는 데이터를 상위 계층으로 순차적으로 이동시켜 응용 계층까지 보내준다.

데이터가 **하위 계층으로 내려갈 때**는 각 계층의 프로토콜에서 정의한 **헤더 정보가 추가**되는 것을 확인할 수 있다. 반대로 데이터를 수신하는 호스트에서는 **상위 계층으로 올라가며** 순차적으로 **헤더 정보를 제거하고 해석**하면서 프로토콜 기능을 수행한다.

### 🔎 TCP/IP 4 계층

많은 사람들이 OSI 7 계층에 대해서는 많이 들어봤겠지만 TCP/IP 4 계층 모델은 조금 생소할 수 있다. TCP/IP 계층은 네 개의 계층을 가지고 있으며 OSI 7 계층과 많이 비교한다.

_**그렇다면 OSI 7계층과 TCP/IP 4계층은 어떤 차이가 있을까?**_

> 아래 사진에서 TCP/IP 계층과 달리 OSI 계층은 애플리케이션 계층을 세 개로 쪼개고 링크 계층을 데이터 링크 계층, 물리 계층으로 나눠서 표현하는 것이 다르며, 인터넷 계층을 네트워크 계층으로 부른다는 점이 다르다.

![](https://velog.velcdn.com/images/psik_2/post/b3f62f8c-513d-4f92-9ce1-b0e6cef80ce5/image.png)

지금부터 TCP/IP 4 계층을 하나씩 살펴보자

#### 📌 애플리케이션 계층

> **애플리케이션(application) 계층**은 **FTP, HTTP, SSH, SMTP, DNS** 등 응용 프로그램이 사용되는 프로토콜 계층이며 웹 서비스, 이메일 등 **실질적으로 사람들에게 제공하는 층**이다.

#### 📌 전송 계층

> **전송(transport) 계층**은 송신자와 수신자를 연결하는 통신 서비스를 제공하며 연결 지향 데이터 스트림 지원, 흐름 제어를 제공할 수 있으며 애플리케이션 계층과 인터넷 계층 사이의 데이터가 전달될 때 중계 역할을 한다.

대표적으로 연결형 서비스의 **TCP**와 비연결형 서비스의 **UDP** 프로토콜이 있다.

**TCP**는 패킷 사이에 순서를 보장하고 연결지향 프로토콜을 사용해서 연결을 하여 신뢰성을 구축해서 수신 여부를 확인하는 **가상 회선 패킷 교환 방식**을 사용한다.

> **가상 회선 패킷 교환 방식**
>
> 일반적으로 가상 회선 방식은 **연결형 서비스**를 지원하기 위한 기능으로, 미리 설정된 **논리적인 연결**을 통해 전송되는 모든 패킷의 경로가 동일하다.
>
> ![](https://velog.velcdn.com/images/psik_2/post/16eb5a06-d1d8-41a8-8137-1547dbb8ed5d/image.png)
>
> 위 사진에서 볼 수 있듯이 송수신 호스트 사이에 설정된 가상의 단일 파이프를 통해 전송되는 **모든 패킷의 경로가 동일**하다. 송수신 호스트 사이에 설정된 가상의 단일 파이프를 통해 송신 호스트가 입력단으로 패킷을 송신하고, 수신 호스트가 출력단에서 패킷을 수신한다.
>
> **즉, 모든 패킷이 하나의 파이프로 표현되는 동일 경로로 전송되므로 패킷이 도착하는 순서가 보낸 순서와 동일하다.**

**UDP**는 순서를 보장하지 않고 수신 여부를 확인하지 않으며 단순히 데이터만 주는 **데이터그램 패킷 교환 방식**을 사용한다.

> **데이터그램 패킷 교환 방식**
>
> 패킷 교환 방식에서 **비연결형 서비스**를 이용해 패킷을 독립적으로 전송하는 것을 **데이터그램 방식**이라고 한다.
>
> ![](https://velog.velcdn.com/images/psik_2/post/78f483d0-f13e-4b0b-9c1c-9fc9f2cd5351/image.png)
>
> 데이터그램 방식은 가상 회선 방식과 다르게 데이터를 전송하기 전에 연결을 설정하지 않으므로, 송신 호스트가 전송한 패킷이 독립적으로 라우팅되는 것 을 알 수 있다. 위 사진 (b)와 같이 패킷 3은 패킷 1.2와 다른 경로를 선택할 수 있으며, 각 전송 경로의 속도는 네트워크 혼잡도에 따라 가변적이다.
>
> **즉, 송신 호스트가 전송한 패킷이 독립적으로 라우팅되므로 데이터의 도착 순서가 바뀔 수 있다.**

#### 📌 인터넷 계층

> **인터넷(internet) 계층**은 장치로부터 받은 네트워크 패킷을 IP 주소로 지정된 목적지로 전송하기 위해 사용되는 계층입니다.

**IP**, **ARP**, **ICMP** 등이 있으며 패킷을 수신해야 할 상대의 주소를 지정하여 데이터를 전달한다. 상대방이 제대로 받았는지에 대해 보장하지 않는 **비연결형**적인 특징을 가지고 있다.

#### 📌 링크 계층

> **링크(link) 계층(네트워크 접근 계층)**은 전선, 광섬유, 무선 등으로 실질적으로 데이터를 전달하며 장치 간에 신호를 주고받는 **규칙**을 정하는 계층이다.

이를 **물리 계층**과 **데이터 링크 계층**으로 나누기도 하는데 물리 계층은 **무선 LAN**과 **유선 LAN**을 통해 0, 1로 이루어진 데이터를 보내는 계층이고, 데이터 링크 계층은 **이더넷 프레임**을 통해 에러 확인, 흐름 제어, 접근 제어를 담당하는 계층이다.

**유선 LAN**을 이루는 **이더넷**은 IEEE802.3 이라는 프로토콜을 따르며 **전이중화 통신**을 사용한다.

> **전이중화(full duplex) 통신**
>
> 아래 그림과 같이 양쪽에서 데이터를 동시에 전송하는 데이터 전달 방법을 **전이중화 통신**이라고 한다. 전이중화 통신은 회선이 2개이므로 양쪽 장치가 동시에 송수신 할 수 있다.
>
> ![](https://velog.velcdn.com/images/psik_2/post/5fc6f588-4131-4016-91af-0273b6d88fc5/image.png)
>
> 일반적인 데이터 통신은 대부분 전이중화 통신이다.

**무선 LAN** 장치는 수신과 송신에 같은 채널을 사용하기 때문에 **반이중화 통신**을 사용한다.

> **반이중화(half duplex) 통신**
>
> **반이중화 통신**은 양쪽 장치는 서로 통신할 수 있지만, 동시에 통신할 수 없으며 **한 번에 한 방향으로만 통신**할 수 있는 방식을 말한다.
>
> ![](https://velog.velcdn.com/images/psik_2/post/913ce225-6fa2-4b94-aa8b-29415e34c728/image.png)
>
> 송신과 수신이 하나의 채널에서 이루어진다. 따라서 충돌을 피하기 위해서 상대의 데이터 전송이 완료될 때까지 기다렸다가 데이터를 전송해야 한다.

**데이터 링크 계층**은 **이더넷 프레임**을 통해 전달받은 데이터의 에러를 검출하고 캡슐화한다.

> **이더넷 프레임**
>
> 아래 그림은 이더넷 프로토콜에서 사용하는 이더넷 프레임의 구조이다.
>
> ![](https://velog.velcdn.com/images/psik_2/post/9958fb9b-139d-41c0-b119-48f74a794a7e/image.png)
>
> 필드의 의미는 아래와 같다.
>
> **Preamble(프리엠블)**
> 7바이트 크기로, 수신 호스트가 송신 호스트의 클록과 동기를 맞출 수 있도록 시간 여유를 제공하는 것이 목적이다. 각 바이트는 **10101010** 비트 패턴을 포함한다.
>
> **Start Frame Delimiter(시작 구분자)**
> 프레임이 시작된다는 의미로 사용되며, Preamble 필드와 구분하기 위해서 **10101011**의 값을 가진다.
>
> **Source Address/Destination Address(송신 호스트 주소/수신 호스트 주소)**
> MAC 계층에서는 호스트를 구분하기 위하여 고유의 MAC 주소를 사용하며, MAC 주소는 일반적으로 LAN 카드에 내장되어 제공된다. 두 필드는 전송되는 프레임의 **송신 호스트와 수신 호스트의 주소를 표현**한다.
>
> **Length/Type**
> 필드 값이 **1,500** 이하이면 Data 필드의 데이터 크기를 의미하는 **Length**로 해석하고, 그렇지 않으면 **Type**으로 해석한다.
>
> **Data**
> Payload라고도 불리며 전달받은 **데이터**가 배치되는 곳이다.
>
> **CRC(순환 중복 검사)**
> 에러 확인 비트이다.

_** 지금까지 TCP/IP 4 계층에 대해 알아보았는데 그렇다면 계층 간 데이터를 어떻게 송수신 하는걸까?**_

### 🔎 계층 간 데이터 송수신 과정

아래 그림에서도 볼 수 있듯이 OSI 7 계층과 마찬가지로 전송 데이터는 송신 호스트의 응용 계층(Application Layer)에서 시작해 하위 계층으로 순차적으로 전달되어, 최종적으로 링크 계층(Link Layer)에서 수신 호스트에 전달되는 것을 알 수 있다. 수신 호스트에서는 데이터를 상위 계층으로 순차적으로 이동시켜 응용 계층까지 보내준다.

![](https://velog.velcdn.com/images/psik_2/post/bcc43a4d-4499-48c6-bdb4-624982fffca2/image.svg)

이때 응용 계층에서 전송 계층으로 데이터가 전달될 때 상위 계층의 헤더가 하위 계층의 데이터에 포함되는 **캡슐화 과정**이 진행된다.
마찬가지로 데이터가 하위 계층에서 상위 계층으로 전달되면서 각 계층의 헤더 부분을 제거하는 **비캡슐화 과정**이 진행되는 것을 확인 할 수 있다.

아래 사진을 보면 데이터 송수신 과정에서 캡슐화/비캡슐화 과정을 확인할 수 있다.

![](https://velog.velcdn.com/images/psik_2/post/a1b28fd5-0a4e-4b9e-85af-87ca530c71c9/image.gif)

이렇게 캡슐화와 비캡슐화를 거쳐 최종적으로 사용자에게 응용 계층의 **PDU**인 데이터로 전달된다.

> **PDU(Protocol Data Unit)**
>
> 네트워크의 어떠한 계층에서 계층으로 데이터가 전달될 때 한 덩어리의 단위를 PDU라고 한다.
>
> 아래 그림을 보면 각 계층의 PDU를 확인할 수 있다.

- 응용 계층: Data
- 전송 계층: Segments(TCP), Datagrams(UDP)
- 인터넷 계층: Packets
- 링크 계층: Frames
  ![](https://velog.velcdn.com/images/psik_2/post/ea6d7191-1e36-42d6-a4aa-6d7d264912b0/image.svg)

## 📖 IP 프로토콜

> **IP 프로토콜은** 응용 계층에서 생성된 사용자 데이터를 전송하기 위해 사용된다.

인터넷 환경에서 데이터 전송 과정이 올바르게 이루어지려면 전송 프로토콜 외에도 다양한 **제어 프로토콜**이 필요하다.

제어 프로토콜의 대표적인 예는 데이터 전송 과정에서 오류를 제어하는 **ICMP**이다. 인터넷에서 사용자 데이터는 IP 프로토콜에 의해 전송되지만, 제어 메시지는 ICMP에 의해 전송된다. 이외에도 IP 주소와 MAC 주소 사이의 변환을 담당하는** ARP/RARP** 프로토콜이 있으며, 모두 인터넷 동작을 위해 꼭 필요하다.

### 📌 ARP 프로토콜



네트워크 환경에서 임의의 호스트가 다른 호스트에 데이터를 전송하려면 수신 호스트의 IP 주소뿐 아니라, MAC 주소도 알아야 한다. 수신 호스트의 IP 주손느 보통 응용 프로그램 사용 자가 프로그램을 실행하는 과정에서 직접 입력하므로, IP 주소로부터 수신 호스트의 MAC 주소를 얻는 작업이 추가로 필요하다.

>**ARP** 
>
**ARP(Address Resolution Protocol)**은 수신 호스트의 주소 변환 기능을 제공하는데, 사용자가 입력한 원격 IP 주소를 이용하여 원격 MAC 주소를 제공하는 프로토콜이다.

![](https://velog.velcdn.com/images/psik_2/post/870eaa92-549c-4e7d-9f45-19783a8eed99/image.png)


### 📌 RARP 프로토콜
앞서 언급한 것처럼 ARP는 IP 주소를 이용해 해당 호스트의 MAC 주소를 제공하는 역할을 한다. 이와 유사한 기능을 수행하는 프로토콜인 RARP는 반대로 MAC 주소를 이용해 IP 주소를 제공한다.

> **RARP**
>
**RARP(Reverse Address Resolution Protocol)**은 로컬 호스트의 주소 변환 기능을 제공하는데, LAN 카드에 보관된 MAC 주소를 이용해 자신의 IP 주소를 얻어내는 프로토콜이다. 

일반 컴퓨터 시스템은 로컬 호스트의 IP 주소가 파일 시스템에 보관되므로 RARP를 사용하지 않지만, 파일 시스템이 존재하는 시스템에서는 반드시 RARP를 사용해야 한다.

### 📌 ICMP 프로토콜

사용자 데이터 전송 과정에서 오류가 발생하면 오류 메시지가 생성된다.
> **ICMP**
>
**ICMP(Internet Control Message Protocol)**은 오류 메시지를 송신 호스트에 전송하는 기능을 담당하는 프로토콜이다.
